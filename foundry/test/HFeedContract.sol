// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.9;
import "../lib/forge-std/src/console2.sol";
import "./Constants.sol";
import "./MockFeed.sol";

contract HFeed {

    int256[] public data;
    uint256 len = 1000;

    uint256 nonce;

    function parseFile() public {

        MockFeed mm = new MockFeed();
        nonce = mm.nonce();

        string memory sortedResults = "-44524523,-44419992,-43199630,-42919587,-42758820,-38768542,-35610862,-35449860,-34701309,-34148118,-34069229,-33977146,-33923694,-33429695,-31971285,-31845234,-31811970,-31768004,-31717646,-31179043,-30749504,-30456697,-29819685,-29724891,-29338599,-29265419,-28899169,-28732569,-28414970,-28256727,-28205100,-28127017,-28073048,-27677209,-27406429,-27343987,-27335360,-27085290,-26967787,-26961464,-26927298,-25984561,-25953699,-25770598,-25704833,-25691099,-25608162,-25420735,-25390506,-25375211,-25207744,-25163449,-25080649,-24993485,-24781787,-24772460,-24355309,-23970313,-23791061,-23790799,-23180627,-23137503,-23137256,-23117973,-23108006,-22991584,-22951373,-22940582,-22885176,-22673282,-22601401,-22534933,-22502558,-22462584,-22435312,-22375119,-22260831,-22237167,-22215241,-22085411,-21996612,-21990251,-21954414,-21690472,-21622531,-21500463,-21456782,-21269625,-21148688,-21137651,-21061503,-21004059,-20928942,-20766738,-20764869,-20565416,-20522935,-20500911,-20426733,-20387604,-20288812,-20270219,-20186322,-20015673,-19769793,-19752619,-19695562,-19644668,-19576180,-19365120,-19238443,-19209317,-19153838,-18937853,-18917494,-18571399,-18488845,-18315746,-18276287,-18180151,-18141909,-18131992,-18085145,-18053255,-18050167,-18007861,-17948650,-17941093,-17742295,-17673125,-17668533,-17530478,-17483237,-17419405,-17370880,-17322089,-17212578,-17136095,-17056486,-16961123,-16856558,-16808734,-16726126,-16712692,-16647755,-16440654,-16375408,-16297914,-16166823,-16116166,-16051638,-16033447,-15999507,-15978784,-15964879,-15914954,-15808879,-15754890,-15639508,-15622664,-15574686,-15543401,-15488658,-15398323,-15345066,-15330326,-15237938,-15186209,-15179781,-15178111,-15089922,-14911092,-14827570,-14753168,-14697069,-14615519,-14568650,-14497426,-14243725,-13854151,-13723209,-13710779,-13671476,-13635322,-13616575,-13586666,-13547743,-13538394,-13528906,-13481770,-13458850,-13423404,-13315809,-13259922,-13198450,-13186808,-13176017,-13166597,-12998729,-12880017,-12864146,-12776211,-12755951,-12438144,-12394872,-12354038,-12346871,-12321975,-12300209,-12238725,-12170372,-12053578,-12033179,-11946500,-11890948,-11874537,-11730906,-11632703,-11596656,-11564082,-11519577,-11456994,-11450525,-11436933,-11426275,-11278397,-11274214,-11218212,-11180899,-11178067,-11121174,-11076733,-11056971,-10990783,-10972651,-10880170,-10856647,-10786102,-10710237,-10678952,-10661823,-10410963,-10402588,-10400920,-10354771,-10318038,-10288517,-10167308,-10157810,-10011329,-10001895,-9959779,-9944731,-9921636,-9912484,-9850954,-9811256,-9783366,-9547801,-9519697,-9243773,-9098125,-8779036,-8765225,-8733448,-8638554,-8581004,-8543924,-8528920,-8517701,-8469626,-8444727,-8405563,-8391155,-8384345,-8377638,-8357261,-8344389,-8315854,-8314141,-8266926,-8115568,-8052015,-7996395,-7852679,-7806409,-7738915,-7589559,-7550106,-7549735,-7522391,-7442955,-7401205,-7364564,-7259230,-7247007,-7199967,-7157446,-7129654,-7096780,-7024224,-7018336,-6994603,-6939251,-6870897,-6822483,-6821363,-6717936,-6670732,-6665866,-6609109,-6584531,-6529526,-6494390,-6475560,-6452504,-6428606,-6381920,-6362313,-6353543,-6326997,-6302359,-6275899,-6219758,-6166821,-6140233,-6108223,-5948961,-5852868,-5852295,-5826214,-5820428,-5800825,-5779978,-5749310,-5725385,-5692372,-5608102,-5571942,-5536681,-5364906,-5358535,-5356799,-5333792,-5312270,-5229290,-5215669,-5140739,-5053751,-4979636,-4926164,-4864595,-4847254,-4843244,-4819986,-4785252,-4777614,-4769415,-4740430,-4740274,-4614444,-4543753,-4487124,-4477746,-4468948,-4458227,-4427999,-4403078,-4402985,-4376170,-4188042,-4160384,-4145568,-4127478,-4120325,-4081813,-4047007,-4036439,-4003160,-3988101,-3934496,-3888759,-3883263,-3768306,-3754606,-3728899,-3713721,-3707899,-3701054,-3694633,-3684057,-3614829,-3564245,-3536211,-3476638,-3356769,-3348671,-3340986,-3269471,-3251587,-3227094,-3214868,-3206389,-3192619,-3180112,-3168263,-3161591,-3156846,-3107997,-2985801,-2900518,-2869211,-2811921,-2785493,-2779443,-2764682,-2735688,-2733983,-2727508,-2693303,-2651279,-2596177,-2562648,-2562062,-2557294,-2529950,-2428221,-2316565,-2294682,-2229498,-2220194,-2209178,-2172809,-2169087,-2033682,-2001395,-1993634,-1819238,-1787496,-1735864,-1711634,-1610634,-1609869,-1598468,-1530023,-1498271,-1417949,-1391164,-1347167,-1313402,-1280093,-1266736,-1171030,-1128980,-1124574,-1124293,-1104153,-1071639,-1048880,-1027543,-958822,-927210,-902268,-874948,-874263,-870604,-870169,-867919,-826409,-740443,-738087,-709974,-692757,-692650,-675069,-666029,-618188,-546380,-539927,-526881,-525194,-493894,-480590,-441848,-429687,-427828,-411817,-403685,-365368,-357695,-353067,-316926,-266232,-258168,-167773,-95125,-71086,-64909,-58465,-15552,29759,95712,159674,188622,228748,268196,290038,318172,402468,412953,444665,450960,532424,569434,609172,622076,626644,653283,691304,749497,783488,835602,883325,907154,968100,1033392,1074255,1111685,1223450,1324439,1410988,1468400,1485112,1502784,1518197,1530409,1668984,1717796,1752311,1770195,1838547,1897649,1939174,1963090,2036880,2050178,2069041,2074988,2078804,2106814,2262889,2380599,2381852,2496844,2508045,2660059,2661242,2668577,2683726,2689776,2704087,2726963,2736328,2772096,2846865,2880834,2889535,2931213,2961920,2974950,3091101,3100471,3143377,3199266,3232299,3254027,3264370,3267745,3271297,3301255,3362019,3471721,3476357,3522826,3543681,3554778,3596816,3614012,3675243,3685210,3712382,3712738,3748838,3769683,3792430,3894318,3933049,3941462,3977870,4019191,4054798,4095018,4122275,4157173,4175832,4201550,4343190,4378998,4380254,4415723,4419241,4425000,4439414,4462990,4534678,4604827,4644857,4718713,4731171,4776661,4812867,4818833,4827322,4872808,4908800,5006619,5028556,5095564,5103631,5177434,5192203,5325993,5350343,5396581,5418965,5490129,5541663,5546763,5554997,5582243,5697135,5722567,5830124,5836567,5838107,5955748,5982556,6069179,6102091,6107170,6113664,6134626,6169127,6263796,6304677,6348059,6363147,6387218,6418596,6428007,6436449,6477402,6545986,6556895,6559999,6619861,6625647,6647792,6765948,6803006,6812685,6813507,6833695,6842431,6861902,6882692,6919572,6929874,7056129,7223030,7224654,7326780,7335552,7376335,7394569,7394825,7478896,7490519,7504586,7552587,7591848,7659771,7673139,7714525,7756352,7802911,7863992,7881213,7957123,7966680,8025853,8091446,8097418,8133369,8140728,8145173,8215278,8230186,8266206,8294755,8333553,8335564,8354772,8356387,8371054,8395939,8461246,8493566,8526906,8538681,8661273,8669571,8696584,8708741,8717171,8854606,8855324,8869152,8872500,8882448,8944617,8953596,9034367,9056841,9126545,9130536,9139708,9272570,9276841,9288215,9304958,9375279,9377043,9435894,9493083,9602971,9731811,9768146,9772184,9844262,9961056,9996870,10005989,10006615,10049365,10052774,10100181,10101868,10240963,10267494,10299165,10312531,10323924,10397032,10400167,10410637,10530393,10657942,10718901,10730461,10764122,10769010,10815567,10826900,10830745,10854097,10878802,10898997,10899481,10954048,11255876,11372959,11403463,11409220,11437360,11482806,11508464,11528219,11539287,11554048,11568231,11602448,11695192,11838346,11890878,11994279,11997132,12041786,12095987,12138787,12200143,12302164,12414422,12455821,12552044,12611443,12622653,12757284,12805613,12900281,12947070,12948760,12979114,13083293,13083414,13152683,13196191,13210150,13271283,13325676,13382843,13397869,13433932,13453912,13478399,13531586,13542525,13843321,13873807,13902575,13979883,13997206,14088331,14280948,14360229,14363661,14416889,14446335,14448342,14593502,14676691,14786144,14977966,15155316,15157479,15193178,15316139,15387277,15395809,15424731,15450301,15508798,15531928,15633047,15638287,15647947,15658609,15700040,15747541,15778833,15983374,16016841,16113457,16196273,16208923,16231145,16244916,16258531,16467715,16488175,16674114,16788875,16791017,16855865,16867447,16876213,16885827,16935539,16956057,16977823,17010891,17127530,17344223,17556478,17577957,17607623,17633401,17661336,17754723,17759503,17824786,17825035,17877480,17892835,18023831,18061552,18338396,18369213,18406436,18461707,18987293,19083682,19090503,19167719,19355288,19395473,19484196,19502447,19518079,19735248,19772561,19833070,19874196,19920554,19966405,19973526,19980983,20222656,20256570,20372850,20503243,20653825,20669790,20676370,20844553,20926157,21116477,21203249,21525824,21653661,21837539,21922374,22140844,22254965,22433556,22531392,22624970,22650954,22711630,22798607,22811872,22857640,22913614,22982929,23090523,23430052,23735185,23956200,23964854,24080960,24131194,24234978,24284515,24402811,24547461,24711073,24743524,24752713,24930818,24976846,25194495,25415074,25931706,26554781,26755133,27287257,28245708,28393375,28943264,29870667,30035338,31230993,31483267,31678469,31687597,32159673,32873157,33453894,33713432,33876221,34965409,35028105,35936955,36012307,36208443,36230769,36603743,37199560,37662380,38105084,38365144,38701051,39203914,39781920,40012570,41319366,41681387,45137910,50303462,58508347,";

        data = new int256[](len);
        uint256 current = 0;
        uint256 ptr = 0;
        int256 sign = 1;

        bytes memory b = bytes(sortedResults);

        for (uint256 i = 0; i < b.length; ++i) {
            uint8 symbol = uint8(b[i]);
            if (symbol == 44) {
                data[ptr] = int256(current) * sign;
                sign = 1; 
                ptr += 1;
                current = 0;
            }
            else if (symbol >= 48 && symbol <= 57) {
                current *= 10;
                current += (uint256(symbol) - 48);
            }
            else {
                sign = -1;
            }
        } 

    }

    function getRandom() public returns (int256) {
        uint256 randomNumber = uint(keccak256(abi.encodePacked(address(this), nonce))) % 1000;
        nonce = uint(keccak256(abi.encodePacked(address(this), nonce)));
        return data[randomNumber];
    }
}
